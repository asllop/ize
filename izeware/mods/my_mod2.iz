
transfer CalcAggr Tuple[String,List[Metric]] -> Aggr (
    name: in.first,
    value: select in.first as _ (
        "CPU" -> in.second.Median("value"),
        "RespTime" -> in.second.Mode("value"),
        _ -> in.second.Mean("value")
    ),
    count: in.second.Len()
)

// Pipe commands

pipe MyPipeA (
    First,
    Second,
    Third
)

run pipe MyPipeB (
    First,
    Second,
    Third
)